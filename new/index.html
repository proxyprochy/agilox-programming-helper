<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Workflow Editor</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="workflow">
    <!-- Horn√≠ ≈ô√°dek -->
    <div class="top-form">
      <div class="form-item">
        <label>id</label>
        <input type="text" value="100">
      </div>
      <div class="form-item">
        <label>name</label>
        <input type="text" value="areaB ‚áí areaA">
      </div>
      <div class="form-item">
        <label>status</label>
        <select>
          <option>99</option>
        </select>
      </div>
    </div>

    <!-- Action (0) -->
    <div class="action">
      <div class="action-header">
        <span>Action (0)</span>
        <span class="chevron">‚ñæ</span>
      </div>
      <div class="action-body">
        <div class="row">
          <label>‚Äú0‚Äù</label>
          <input type="text" value="0">
          <label>action</label>
          <select>
            <option>pickup</option>
          </select>
        </div>
        <div class="row">
          <label>target</label>
          <select>
            <option>stationarea</option>
          </select>
          <input type="text" value="areaA">
        </div>
        <a href="#" class="add-attribute" data-popup="popup-0">+ add action attribute</a>
        <div class="attribute-popup" id="popup-0">
          <button>+ event</button>
          <button>+ max_speed</button>
          <button>+ max_retries</button>
          <button>+ acceleration</button>
          <button>+ autoskip</button>
        </div>
      </div>
    </div>

    <!-- Action (2) -->
    <div class="action">
      <div class="action-header">
        <span>Action (2)</span>
        <span class="chevron">‚ñæ</span>
      </div>
      <div class="action-body">
        <div class="row">
          <label>‚Äú0‚Äù</label>
          <input type="text" value="2">
          <label>action</label>
          <select>
            <option>drop</option>
          </select>
        </div>
        <div class="row">
          <label>target</label>
          <select>
            <option>station</option>
          </select>
          <input type="text" value="pal1">
        </div>
        <div class="row deletable">
          <label>max_speed</label>
          <input type="text" value="300">
          <button class="delete-btn">üóë</button>
        </div>
        <div class="row deletable">
          <label>max_retries</label>
          <input type="text" value="1">
          <button class="delete-btn">üóë</button>
        </div>
        <div class="row">
          <label>event</label>
          <select>
            <option>no_station_left</option>
          </select>
          <select>
            <option>order_cancel</option>
          </select>
        </div>
        <a href="#" class="add-attribute" data-popup="popup-2">+ add action attribute</a>
        <div class="attribute-popup" id="popup-2">
          <button>+ event</button>
          <button>+ max_speed</button>
          <button>+ max_retries</button>
          <button>+ acceleration</button>
          <button>+ autoskip</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Toggle action body
    document.querySelectorAll('.action-header').forEach(header => {
      header.addEventListener('click', () => {
        const body = header.nextElementSibling;
        const chevron = header.querySelector('.chevron');
        const isVisible = body.style.display !== 'none';
        body.style.display = isVisible ? 'none' : 'block';
        chevron.textContent = isVisible ? '‚ñ∏' : '‚ñæ';
      });
    });

    // Toggle attribute popup
    document.querySelectorAll('.add-attribute').forEach(link => {
      link.addEventListener('click', e => {
        e.preventDefault();
        const popupId = link.dataset.popup;
        const popup = document.getElementById(popupId);
        popup.classList.toggle('active');
      });
    });
  </script>
</body>
</html>
